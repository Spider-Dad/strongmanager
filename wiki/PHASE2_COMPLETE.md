# ‚úÖ –§–∞–∑–∞ 2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

**–î–∞—Ç–∞:** 2025-12-21
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ production
**–í–µ—Ç–∫–∞:** `refactoring/phase2-n8n-webhooks`

---

## –ò—Ç–æ–≥–∏

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. **–û–±–Ω–æ–≤–ª–µ–Ω workflow** —Å —Ä–∞–∑–¥–µ–ª—å–Ω—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –æ—à–∏–±–æ–∫ (8 –Ω–æ–¥)
2. **–ü—Ä–æ–≤–µ–¥–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 100% —É—Å–ø–µ—Ö –ø—Ä–∏ 2-3 –∑–∞–ø—Ä–æ—Å–∞—Ö/—Å–µ–∫
3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É n8n –∏ PostgreSQL
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã** —Å –∞–ª–µ—Ä—Ç–∞–º–∏

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–µ—Å—Ç | –ó–∞–ø—Ä–æ—Å—ã | –ó–∞–¥–µ—Ä–∂–∫–∞ | –£—Å–ø–µ—Ö | –°—Ç–∞—Ç—É—Å |
|------|---------|----------|-------|--------|
| –ë—ã—Å—Ç—Ä—ã–π | 20 | 1 —Å–µ–∫ | 100% | ‚úÖ |
| –û—Å–Ω–æ–≤–Ω–æ–π | 100 | 500ms | 100% | ‚úÖ |
| –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ | 100 | 200ms | 82% | ‚ùå |

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **2-3 –∑–∞–ø—Ä–æ—Å–∞/—Å–µ–∫**

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ò–º–ø–æ—Ä—Ç workflow –≤ n8n

```
n8n UI ‚Üí Workflows ‚Üí Getcourse_webhook_insert
‚Üí ... ‚Üí Import from File
‚Üí –í—ã–±—Ä–∞—Ç—å: n8n/workflows/Getcourse_webhook_insert.json
‚Üí –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å (Active = ON)
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ë–ï–ó –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
curl -X POST https://spiderdad.ru/webhook/getcoursebd \
  -H "Content-Type: application/json" \
  -d '{"eventDate":"2025-12-21T12:00:00Z"}'

# –û–∂–∏–¥–∞–µ—Ç—Å—è: Telegram –∞–ª–µ—Ä—Ç "–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: userId, userEmail, answerId"
```

### 3. –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç

```bash
cd n8n/workflows/tests_results
python test_run_load.py --requests 100 --delay-ms 500 --verbose

# –û–∂–∏–¥–∞–µ—Ç—Å—è: 100% —É—Å–ø–µ—Ö (100/100)
```

---

## –§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ)

### –û—Å–Ω–æ–≤–Ω—ã–µ:
1. ‚úÖ `getcourse_bot/wiki/REFACTORING_PHASE2.md` - **–ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø**
2. ‚úÖ `getcourse_bot/wiki/N8N_QUICK_START.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç
3. ‚úÖ `getcourse_bot/wiki/N8N_TESTING_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
4. ‚úÖ `getcourse_bot/wiki/PHASE2_COMPLETE.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª (–∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ)

### Workflow:
- ‚úÖ `getcourse_bot/n8n/workflows/Getcourse_webhook_insert.json` - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

### –¢–µ—Å—Ç—ã:
- ‚úÖ `getcourse_bot/tests/test_n8n_run_load.py` - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `getcourse_bot/tests/n8n_test_results_*.json` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚è±Ô∏è –¢–∞–π–º–∞—É—Ç: 60 —Å–µ–∫—É–Ω–¥
- üìä –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: 2-3 –∑–∞–ø—Ä–æ—Å–∞/—Å–µ–∫
- ‚úÖ –ü–æ—Ä–æ–≥ —É—Å–ø–µ—Ö–∞: 100% (0 –ø–æ—Ç–µ—Ä—å)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: –∑–∞–¥–µ—Ä–∂–∫–∞ 500ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- ‚ö†Ô∏è –ú–∞–∫—Å–∏–º—É–º: –∑–∞–¥–µ—Ä–∂–∫–∞ 333ms (3 –∑–∞–ø—Ä–æ—Å–∞/—Å–µ–∫)
- ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ: –∑–∞–¥–µ—Ä–∂–∫–∞ <200ms (–æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è)

---

## –°–ª–µ–¥—É—é—â–∞—è —Ñ–∞–∑–∞

**–§–∞–∑–∞ 3:** –ú–∏–≥—Ä–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏–∑ GAS –≤ Python

**–ó–∞–¥–∞—á–∏:**
- –°–æ–∑–¥–∞—Ç—å Python —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤
- –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–∑ Google Apps Script
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å APScheduler

**–í–µ—Ç–∫–∞:** `refactoring/phase3-business-logic`

---

**–§–∞–∑–∞ 2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!** üöÄ
